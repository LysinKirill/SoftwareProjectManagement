# Спецификация фронтенд-приложения (SPEC-FRONTEND)

**ID документа:** SPEC-FRONTEND  
**Версия:** 1.0  
**Дата:** 11.04.2025  
**Ответственный:** Лысин К.С.

## 1. Область действия
Мобильное приложение на React Native для взаимодействия с системой "Personage". Включает экраны авторизации, расписания, управления задачами, навигацию и обработку состояний.

## 2. Связанные требования
- rq-10: Экран авторизации
- rq-11: Главный экран (расписание)
- rq-12: Управление задачами
- rq-13: Управление приоритетами
- rq-14: Навигация и UI
- rq-15: Обработка состояний
- rq-16: REST API взаимодействие

## 3. Критерии приёмки (Acceptance Criteria)

### 3.1. Экран авторизации
**AC-035**: При запуске приложения показывается экран с кнопками "Войти через Google" и "Войти через Яндекс".  
**Метод верификации:** VM-031

**AC-036**: При нажатии на кнопку происходит перенаправление на страницу провайдера для ввода учетных данных.  
**Метод верификации:** VM-032

**AC-037**: После успешной аутентификации пользователь возвращается в приложение, токен сохраняется в secure storage.  
**Метод верификации:** VM-033

**AC-038**: При последующих запусках приложения выполняется автоматический вход по сохранённому токену.  
**Метод верификации:** VM-034

### 3.2. Главный экран (расписание)
**AC-039**: Расписание отображается в виде списка событий на день (по умолчанию) или почасовой шкалы на неделю.  
**Метод верификации:** VM-035

**AC-040**: Для каждого события отображается: название, время, тип (иконка), приоритет (цветовая индикация).  
**Метод верификации:** VM-036

**AC-041**: Возможность переключения между видами "День", "Неделя", "Месяц" через табы или сегментированный контрол.  
**Метод верификации:** VM-037

**AC-042**: Pull-to-refresh для обновления данных расписания.  
**Метод верификации:** VM-038

**AC-043**: Тап по событию открывает детальную информацию.  
**Метод верификации:** VM-039

### 3.3. Управление задачами
**AC-044**: Экран создания события с полями: название (обязательное), описание, дата и время, тип, приоритет, участники.  
**Метод верификации:** VM-040

**AC-045**: Валидация полей при создании/редактировании события.  
**Метод верификации:** VM-041

**AC-046**: Возможность редактирования всех атрибутов существующего события.  
**Метод верификации:** VM-042

**AC-047**: Возможность удаления события с подтверждением.  
**Метод верификации:** VM-043

**AC-048**: Drag & drop для изменения времени события в weekly view.  
**Метод верификации:** VM-044

### 3.4. Управление приоритетами
**AC-049**: Возможность изменения приоритета у одной задачи через контекстное меню.  
**Метод верификации:** VM-045

**AC-050**: Batch изменение приоритета у нескольких выбранных задач.  
**Метод верификации:** VM-046

**AC-051**: Изменения приоритета немедленно отправляются на бэкенд.  
**Метод верификации:** VM-047

### 3.5. Навигация и UI/UX
**AC-052**: Нижняя панель вкладок для перехода между разделами: "Расписание", "Задачи", "Настройки".  
**Метод верификации:** VM-048

**AC-053**: Плавные анимации перехода между экранами (fade, slide).  
**Метод верификации:** VM-049

**AC-054**: Поддержка темной и светлой темы (синхронизация с системной темой).  
**Метод верификации:** VM-050

**AC-055**: Адаптивный дизайн для различных размеров экрана.  
**Метод верификации:** VM-051

### 3.6. Обработка состояний
**AC-056**: При загрузке данных показывается индикатор (спиннер или skeleton screen).  
**Метод верификации:** VM-052

**AC-057**: При ошибке сети показывается сообщение с кнопкой "Повторить".  
**Метод верификации:** VM-053

**AC-058**: При ошибке сервера (5xx) показывается понятное сообщение.  
**Метод верификации:** VM-054

**AC-059**: Offline режим: показывать кэшированные данные при отсутствии сети.  
**Метод верификации:** VM-055

## 4. Методы верификации (Verification Methods)

**VM-031**: Демонстрация экрана авторизации при первом запуске.  
**Тип:** Demo

**VM-032**: Тестирование OAuth flow с тестовыми аккаунтами.  
**Тип:** Test

**VM-033**: Проверка сохранения токена в secure storage (Keychain/Keystore).  
**Тип:** Inspection

**VM-034**: Тестирование автоматического входа при повторном запуске.  
**Тип:** Test

**VM-035**: Демонстрация различных видов отображения расписания.  
**Тип:** Demo

**VM-036**: Проверка корректности отображения всех полей события.  
**Тип:** Inspection

**VM-037**: Тестирование переключения между режимами отображения.  
**Тип:** Test

**VM-038**: Демонстрация pull-to-refresh.  
**Тип:** Demo

**VM-039**: Тестирование навигации к деталям события.  
**Тип:** Test

**VM-040**: Демонстрация экрана создания события.  
**Тип:** Demo

**VM-041**: Тестирование валидации полей (пустые, некорректные форматы).  
**Тип:** Test

**VM-042**: Демонстрация редактирования события.  
**Тип:** Demo

**VM-043**: Тестирование удаления с подтверждением.  
**Тип:** Test

**VM-044**: Демонстрация drag & drop в weekly view.  
**Тип:** Demo

**VM-045**: Тестирование изменения приоритета одиночной задачи.  
**Тип:** Test

**VM-046**: Демонстрация batch изменения приоритета.  
**Тип:** Demo

**VM-047**: Проверка синхронизации изменений с бэкендом через network inspector.  
**Тип:** Inspection

**VM-048**: Тестирование навигации через нижнюю панель.  
**Тип:** Test

**VM-049**: Проверка плавности анимаций (60 FPS).  
**Тип:** Analysis

**VM-050**: Демонстрация переключения тем.  
**Тип:** Demo

**VM-051**: Тестирование на эмуляторах с разными размерами экрана.  
**Тип:** Test

**VM-052**: Демонстрация состояний загрузки.  
**Тип:** Demo

**VM-053**: Тестирование обработки ошибок сети (airplane mode).  
**Тип:** Test

**VM-054**: Инжекция серверных ошибок и проверка отображения.  
**Тип:** Test

**VM-055**: Демонстрация работы в offline режиме.  
**Тип:** Demo

## 5. Технические детали

### 5.1. Технологии
- React Native 0.73+
- TypeScript 5.3+
- Навигация: React Navigation 6.x
- State management: Zustand или Context API
- UI компоненты: React Native Paper или собственные
- HTTP клиент: Axios или React Query

### 5.2. Структура проекта
Верхнеуровневая структура фронтенд проекта - референсное представление, не является требованием к реализации в точности в представленном виде:
```tree
src/
├── screens/
│ ├── AuthScreen.tsx
│ ├── ScheduleScreen.tsx
│ ├── TaskManagerScreen.tsx
│ └── SettingsScreen.tsx
├── components/
│ ├── EventCard.tsx
│ ├── PrioritySelector.tsx
│ └── LoadingIndicator.tsx
├── services/
│ ├── api.ts
│ └── auth.ts
├── store/
│ └── eventsStore.ts
└── utils/
└── dateFormatter.ts
```

### 5.3. Производительность
Время первого рендера: <3 секунд
- FPS в анимациях: ≥60 FPS
- Потребление памяти: <200 МБ на iOS/Android
- Размер APK: <30 МБ (без ресурсов)

### 5.5. Поддерживаемые платформы
- iOS: 13.0+
- Android: API level 29 (Android 10)+
- Разрешения экрана: от 320px до 1440px width